<section class="container my-5">
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="d-flex justify-content-between align-items-start mb-4">
        <div>
          <% if @tag %>
            <h1 class="fw-semibold mb-1">Articles tagged with "<%= @tag.name %>"</h1>
            <p class="text-muted mb-0">
              <%= link_to "← View all articles", blog_path, class: "text-decoration-none" %>
            </p>
          <% else %>
            <h1 class="fw-semibold mb-0">Weblog</h1>
          <% end %>
        </div>
        <%= link_to blog_feed_path(format: :rss), class: "text-decoration-none", title: "Subscribe via RSS" do %>
          <i class="bi bi-rss-fill"></i> RSS
        <% end %>
      </div>

      <% if @articles.any? %>
        <% @articles.each do |article| %>
          <article class="mb-5 pb-4 border-bottom">
            <div class="mb-2">
              <time class="text-muted small" datetime="<%= article.published_at.iso8601 %>">
                <%= article.published_at.strftime("%B %-d, %Y at %H:%M") %>
              </time>
            </div>

            <h2 class="h3 mb-3">
              <%= link_to article.title, article_path(article.slug), class: "text-decoration-none text-dark fw-semibold" %>
            </h2>

            <div class="mb-3 article-content">
              <%= article.summary_html %>
            </div>

            <div class="d-flex align-items-center gap-3">
              <% if article.truncated? %>
                <%= link_to "Continue reading →", article_path(article.slug), class: "text-decoration-none fw-medium" %>
              <% end %>

              <% if article.tags.any? %>
                <div class="d-flex gap-2 flex-wrap">
                  <% article.tags.each do |tag| %>
                    <%= link_to tag.name, blog_path(tag: tag.name), class: "badge bg-light text-dark text-decoration-none border" %>
                  <% end %>
                </div>
              <% end %>

              <% if logged_in? %>
                <%= link_to "Edit", edit_admin_article_path(article), class: "text-decoration-none text-muted small" %>
              <% end %>
            </div>
          </article>
        <% end %>

        <div class="mt-4">
          <%= paginate @articles %>
        </div>
      <% else %>
        <div class="text-center py-5">
          <p class="text-muted">No articles found.</p>
          <% if @tag %>
            <%= link_to "← View all articles", blog_path, class: "btn btn-custom btn-github" %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</section>
